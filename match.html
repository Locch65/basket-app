<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Statistiche Basket</title>
  <link rel="stylesheet" href="match.css">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <meta name="theme-color" content="#2c3e50">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div id="hamburgerMenu">
    <button id="hamburgerBtn">☰</button>
    <nav id="menu" class="hidden">
      <ul>
        <li>
          <a href="./calendario.html" style="text-decoration: none; color: inherit; display: block;">
            <i class="fas fa-calendar-alt"></i> Calendario
          </a>
        </li>
        <li>
          <button id="adminBtn1"><i class="fas fa-user-shield"></i> Admin</button>
        </li>
      </ul>
    </nav>
  </div>  <!-- Intestazione -->
  <div id="header">

	<!-- Bottone Admin -->
    <div id="adminButtonContainer">
      <!-- Nuovo bottone Video -->
      <button id="videoBtn" class="btn-video-default">Video</button>
    </div>

	<!-- Popup Admin -->
	<div id="adminPopup" class="hidden popup">
	  <div class="popup-content">
		<h2>Accesso Admin</h2>
		<input type="password" id="adminPassword" placeholder="Password admin">
		<button id="adminOkBtn">Ok</button>
		<button id="adminCancelBtn">Annulla</button>
	  </div>
	</div>

    <div id="teamNames">
	  <label id="teamA" class="squadra-label" >Squadra A</label>
      <label id="teamB" class="squadra-label" >Squadra B</label>
    </div>
    <div id="scoreboard">
      <div id="punteggioNumerico">
        <span id="score">0</span> - <span id="scoreB">0</span>
      </div>
      <span id="periodoAttuale"></span>
    </div>
  </div>

  <div id="contenuto">
    <div id="topControls">
      <div id="squadraB" class="hidden">
        <!-- Rettangolo colorato con bordo -->
        <div id="squadraB-box" class="squadra-box">
          <!-- Nome squadra a sinistra -->
          <div class="squadraB-left">
            <h1 id="titoloB">Squadra</h1>
            <span id="punti_squadraB" class="punteggio"></span>
          </div>
          <!-- Bottoni a destra -->
          <div class="squadraB-right" id="controlsB">
            <!-- Bottoni punteggio generati via JS -->
          </div>
        </div>
      </div>
    </div>

    <div id="ordinamenti">
      <div class="ordinamenti-left">
        <button><i class="fas fa-arrow-up"></i> Numero</button>
        <button><i class="fas fa-arrow-up"></i> Cognome</button>
        <button><i class="fas fa-arrow-up"></i> Punteggio</button>
      </div>
    </div>

    <div id="giocatori">
      <div class="loading">Caricamento giocatori...</div>
    </div>
    <!-- Mostra la versione dello script -->
    <div id="scriptVersion" class="versione"></div>
  </div>

  <!-- ------------------------------------------------------------------------- -->
  <!-- ATTENZIONE: Aggiornare la versione -->
  <!-- ------------------------------------------------------------------------- -->
  <script src="common.js?v=1.0.84"></script>
  <script src="match.js?v=1.0.84"></script>
  <script>
  
  //window.addEventListener("beforeunload", function (event) {
  //  // Mostra la finestra di conferma
  //  if (isAdmin) {
  //    salvaDatiPartita();
  //    event.preventDefault();
  //    event.returnValue = "Vuoi salvare i dati prima di uscire o ricaricare?";
  //    // ⚠️ Nota: il messaggio personalizzato non sempre viene mostrato,
  //    // ma la finestra di conferma appare comunque.
	//}
  //});
  
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js").then((reg) => {
      console.log("Service Worker registrato");
    });

    // Quando un nuovo SW prende controllo, ricarica la pagina automaticamente
    navigator.serviceWorker.addEventListener("controllerchange", () => {
      if (!window.__reloadedOnce) {
        window.__reloadedOnce = true;
        window.location.reload();
      }
    });
  }
</script>

</body>
</html>
















